<p-menu #menuOptiontSchedulePersonList [model]="menuOptiontSchedulePersonListItems" [popup]="true" />

<body>

    <p-dialog header="Formularios de Agendamento do usuário" [modal]="true" [(visible)]="showDialogSchedulePerson"
        [maximizable]="true" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [style]="{ width: '50vw' }">
        <span>
            <h4>Seu formulario de agendamento</h4>
        </span>
        <span class="p-text-secondary block mb-5">
            Nesse formulario você deve informar os dias da semana e os horarios que você tem o costume de fazer live ou
            que você tem disponibilidade.
            O proposito é pra facilitar os agendamentos das lives para os ADMs.
        </span>

        <p-accordion class="w-full" expandIcon="pi pi-plus" collapseIcon="pi pi-minus" [multiple]="true">
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <span class="font-bold white-space-nowrap">DOMINGO</span>
                </ng-template>
                <div class="inline">
                    <div *ngFor="let horario of horariosDomingo">
                        <p-tag value="{{horario.horario}}" />
                    </div>
                </div>
                <div class="footer">
                    <p-floatLabel>
                        <p-multiSelect [options]="Horarios" [(ngModel)]="horariosDomingo" optionLabel="horario"
                            placeholder="Selecione os horários que pode fazer live" />
                        <label>Horários que faço live</label>
                    </p-floatLabel>
                </div>
            </p-accordionTab>
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <span class="font-bold white-space-nowrap">SEGUNDA</span>
                </ng-template>
                <div class="inline">
                    <div *ngFor="let horario of horariosSegunda">
                        <p-tag value="{{horario.horario}}" />
                    </div>
                </div>
                <div class="footer">
                    <p-floatLabel>
                        <p-multiSelect [options]="Horarios" [(ngModel)]="horariosSegunda" optionLabel="horario"
                            placeholder="Selecione os horários que pode fazer live" />
                        <label>Horários que faço live</label>
                    </p-floatLabel>
                </div>
            </p-accordionTab>
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <span class="font-bold white-space-nowrap">TERÇA</span>
                </ng-template>
                <div class="inline">
                    <div class="inline" *ngFor="let horario of horariosTerca">
                        <p-tag value="{{horario.horario}}" />
                    </div>
                </div>
                <div class="footer">
                    <p-floatLabel>
                        <p-multiSelect [options]="Horarios" [(ngModel)]="horariosTerca" optionLabel="horario"
                            placeholder="Selecione os horários que pode fazer live" />
                        <label>Horários que faço live</label>
                    </p-floatLabel>
                </div>
            </p-accordionTab>
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <span class="font-bold white-space-nowrap">QUARTA</span>
                </ng-template>
                <div class="inline">
                    <div class="inline" *ngFor="let horario of horariosQuarta">
                        <p-tag value="{{horario.horario}}" />
                    </div>
                </div>
                <div class="footer">
                    <p-floatLabel>
                        <p-multiSelect [options]="Horarios" [(ngModel)]="horariosQuarta" optionLabel="horario"
                            placeholder="Selecione os horários que pode fazer live" />
                        <label>Horários que faço live</label>
                    </p-floatLabel>
                </div>
            </p-accordionTab>
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <span class="font-bold white-space-nowrap">QUINTA</span>
                </ng-template>
                <div class="inline">
                    <div class="inline" *ngFor="let horario of horariosQuinta">
                        <p-tag value="{{horario.horario}}" />
                    </div>
                </div>
                <div class="footer">
                    <p-floatLabel>
                        <p-multiSelect [options]="Horarios" [(ngModel)]="horariosQuinta" optionLabel="horario"
                            placeholder="Selecione os horários que pode fazer live" />
                        <label>Horários que faço live</label>
                    </p-floatLabel>
                </div>
            </p-accordionTab>
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <span class="font-bold white-space-nowrap">SEXTA</span>
                </ng-template>
                <div class="inline">
                    <div class="inline" *ngFor="let horario of horariosSexta">
                        <p-tag value="{{horario.horario}}" />
                    </div>
                </div>
                <div class="footer">
                    <p-floatLabel>
                        <p-multiSelect [options]="Horarios" [(ngModel)]="horariosSexta" optionLabel="horario"
                            placeholder="Selecione os horários que pode fazer live" />
                        <label>Horários que faço live</label>
                    </p-floatLabel>
                </div>
            </p-accordionTab>
            <p-accordionTab>
                <ng-template pTemplate="header">
                    <span class="font-bold white-space-nowrap">SABADO</span>
                </ng-template>
                <div class="inline">
                    <div class="inline" *ngFor="let horario of horariosSabado">
                        <p-tag value="{{horario.horario}}" />
                    </div>
                </div>
                <div class="footer">
                    <p-floatLabel>
                        <p-multiSelect [options]="Horarios" [(ngModel)]="horariosSabado" optionLabel="horario"
                            placeholder="Selecione os horários que pode fazer live" />
                        <label>Horários que faço live</label>
                    </p-floatLabel>
                </div>
            </p-accordionTab>
        </p-accordion>

        <ng-template pTemplate="footer">
            <p-button label="Salvar Formulario"
                [disabled]="horariosDomingo.length < 1 && horariosSegunda.length < 1 && horariosTerca.length < 1 &&
            horariosQuarta.length < 1 && horariosQuinta.length < 1 && horariosSexta.length < 1 && horariosSabado.length < 1"
                (click)="saveFormSChedulePerson()" [loading]="isloading" />
        </ng-template>
    </p-dialog>

    <p-dialog class="StreamRegister" header="Cadastro de Stream" [modal]="true" [(visible)]="showDialogRegisterStream"
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [style]="{ width: '50vw' }" [maximizable]="true">
        <span>
            <h4>Cadastre seu canal de transmissão</h4>
        </span>

        <form [formGroup]="registerStreamForm">
            <p-floatLabel>
                <input type="text" pInputText id="chanel" formControlName="chanel"
                    pTooltip="nome como na url exemplo: 'cainanbt'" tooltipPosition="top" required
                    [disabled]="isloading" />
                <label for="chanel">Nome do seu canal como na URL</label>
            </p-floatLabel>
            <p-floatLabel>
                <p-dropdown formControlName="plataform" [options]="plataformList" optionLabel="plataform"
                    placeholder="Selecione a plataforma" [checkmark]="true" [showClear]="true" optionLabel="name" />
                <label for="plataform">Em qual plataforma que faz live</label>
            </p-floatLabel>
        </form>
        <p-footer>
            <p-button class="btnCadastrar" [label]="txtBtnRegisterTransmissao" [loading]="isloading"
                (click)="saveFormStream()" />
            <p-button class="btnCancelar" label="Cancelar" (click)="cancelRegisterStream()" />
        </p-footer>
    </p-dialog>

    <p-dialog class="StreamList" header="Lista de Stream" [modal]="true" [(visible)]="showDialogListStream"
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [style]="{ width: '50vw' }" [maximizable]="true">
        <span>
            <h4>Lista dos seus canais de transmissão</h4>
        </span>
        <p-table #dt1 [value]="streamsToList" [tableStyle]="{ 'min-width': '50%' }" styleClass="p-datatable-striped"
            responsiveLayout="stack" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[5, 10, 20]"
            [globalFilterFields]="['channel', 'plataform', 'link']">
            <ng-template pTemplate="caption">
                <div class="flex align-items-center justify-content-between">
                    <p-iconField iconPosition="left" class="ml-auto">
                        <p-inputIcon>
                            <i class="pi pi-search"></i>
                        </p-inputIcon>
                        <input pInputText type="text" (input)="dt1.filterGlobal(filterStreamsList($event),'contains')"
                            placeholder="Buscar" />
                    </p-iconField>
                    <p-button icon="pi pi-refresh" (click)="refreshTableStreams()" />
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="channel">Nomede do canal
                        <p-sortIcon field="channel" />
                    </th>
                    <th pSortableColumn="link">Link do canal
                        <p-sortIcon field="link" />
                    </th>
                    <th>Ações</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-stream>
                <tr>
                    <td>{{stream.channel}}</td>
                    <td>{{stream.link}}</td>
                    <td><p-button icon="pi pi-ellipsis-v"
                            (click)="openMenuTableStreams($event,menuOptiontSchedulePersonList,stream)" />
                    </td>
                </tr>
            </ng-template>
        </p-table>

    </p-dialog>

    <p-dialog header="Usuário sem Stream cadastrada" [modal]="true" [(visible)]="showDialogStreamPerson"
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [style]="{ width: '50vw' }">
    </p-dialog>

    <p-card class="formAgendamentoCard" header="Meu formulario de agendamento"
        subheader="Seu formulario dos dias que costuma fazer live">
        <p>{{msgSchedulePerson}}</p>
        <ng-template pTemplate="footer">
            <p-button [label]="msgBtnSchedulePerson" (click)="criarSchedulePerson()" />
        </ng-template>
    </p-card>

    <p-card class="streamsCard" header="Minha Stream" subheader="Sua stream cadastrada e sua agenda de lives">
        <p>{{msgStreamPerson}}</p>
        <ng-template pTemplate="footer">
            <p-button [label]="msgBtnStreamPerson" (click)="criarStreamPerson()" />
        </ng-template>
    </p-card>
</body>